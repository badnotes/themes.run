---
title: 'ä½¿ç”¨ Astro æ¡†æ¶æ„å»ºé™æ€ç½‘ç«™çš„å…¥é—¨æŒ‡å—'
description: ''
pubDate: '2025-05-19'
image: '/article/astro.jpg'
categories: ['å…¥é—¨æŒ‡å—']
author: 'fyme'
tags: ['Astro']
type: 'Article'
---


### ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Astro
##### 1.1 ç°ä»£é™æ€ç«™ç‚¹ç”Ÿæˆå™¨çš„ä¼˜åŠ¿

Astro ä½œä¸ºæ–°ä¸€ä»£é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆSSGï¼‰ï¼Œç»“åˆäº†ç°ä»£å‰ç«¯å¼€å‘çš„è¯¸å¤šä¼˜åŠ¿ï¼š
- ç»„ä»¶åŒ–å¼€å‘ï¼šæ”¯æŒ React/Vue/Svelte ç­‰æ¡†æ¶ç»„ä»¶
- é›¶ JS é»˜è®¤ï¼šé»˜è®¤è¾“å‡ºçº¯é™æ€ HTML/CSS
- æŒ‰éœ€åŠ è½½ï¼šé‡‡ç”¨ **ç¦»å²›** æ¶æ„å®ç°æ™ºèƒ½åŠ è½½
- å¤šæºæ”¯æŒï¼šæ— ç¼é›†æˆ Markdown/MDX/API ç­‰æ•°æ®æº

##### 1.2 Astro çš„æ ¸å¿ƒç‰¹æ€§

- ç®€å•é«˜æ•ˆæ™ºèƒ½å†…å®¹å¤„ç† ï¼ˆåŠ è½½æœ¬åœ° Markdown æ ¹æ®æ¨¡æ¿æ¸²æŸ“å±•ç¤ºï¼‰

```astro
---
// æœåŠ¡ç«¯é€»è¾‘
const posts = await Astro.glob('./posts/*.md');
---
<!-- æ¨¡æ¿éƒ¨åˆ† -->
{posts.map(post => (
  <BlogPost {...post.frontmatter} />
))}
```

### äºŒã€å¼€å§‹å§ï¼Œé¡¹ç›®åˆå§‹åŒ–ä¸å¯åŠ¨
##### 2.1 ç¯å¢ƒå‡†å¤‡ 
- éœ€é¢„å…ˆå®‰è£… [NodeJS](https://nodejs.org/) ç¯å¢ƒï¼Œæ­¤å¤„ç•¥
- æ‰§è¡Œå®‰è£…å‘½ä»¤ `npm create astro@latest my-blog` ï¼Œ å®‰è£…æç¤ºç¡®è®¤ä¼šåˆ†åˆ«å®Œæˆ :
  - ä½¿ç”¨æœ€åŸºæœ¬çš„æ¨¡ç‰ˆå·¥ç¨‹
  - å®‰è£…ä¾èµ–
  - åˆå§‹åŒ– git ç‰ˆæœ¬æ§åˆ¶

```bash
# å®‰è£…
npm create astro@latest my-blog

  #> npx
  #> create-astro my-blog

  # astro   Launch sequence initiated.
  #      â—¼  dir Using my-blog as project directory

  #  tmpl   How would you like to start your new project?
  #         A basic, helpful starter project

  #  deps   Install dependencies?
  #         Yes

  #   git   Initialize a new git repository?
  #         Yes

  #      âœ”  Project initialized!
  #         â–  Template copied
  #         â–  Dependencies installed
  #         â–  Git initialized

  #  next   Liftoff confirmed. Explore your project!
  #         Enter your project directory using cd ./my-blog 
  #         Run npm run dev to start the dev server. CTRL+C to stop.
  #         Add frameworks like react or tailwind using astro add.

  #         Stuck? Join us at https://astro.build/chat
  #â•­â”€â”€â”€â”€â”€â•®  Houston:
  #â”‚ â—  â—¡ â—   Good luck out there, astronaut! ğŸš€
  #â•°â”€â”€â”€â”€â”€â•¯

# è¿›å…¥ç›®å½•
cd my-blog
# å¯åŠ¨
npm run dev
```

å·¥ç¨‹åˆå§‹åŒ–å®Œæˆï¼Œå¹¶ä¸”å·²ç»å¯åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™ç”¨æµè§ˆå™¨æ‰“å¼€ http://localhost:4321 , åˆ™å¯è®¿é—®ç½‘ç«™é¦–é¡µã€‚

##### 2.2 ç”Ÿæˆçš„ç›®å½•ç»“æ„è§£æ

```bash
src/
â”œâ”€â”€ components/      # å¯å¤ç”¨ç»„ä»¶
â”œâ”€â”€ layouts/         # é¡µé¢å¸ƒå±€æ¨¡æ¿
â”œâ”€â”€ pages/           # è·¯ç”±é¡µé¢
â””â”€â”€ styles/          # å…¨å±€æ ·å¼
```

### ä¸‰ã€æ¨¡æ¿ç³»ç»Ÿè®¾è®¡ä¸å®ç°
##### 3.1 åŸºç¡€å¸ƒå±€æ¨¡æ¿

src/layouts/Layout.astro

```astro
---
interface Props {
  title: string;
  description?: string;
}
const { title, description = "é»˜è®¤æè¿°" } = Astro.props;
---
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>{title}</title>
  <meta name="description" content={description}>
  <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
  <header class="site-header">
    <nav>
      <a href="/">é¦–é¡µ</a>
      <a href="/about">å…³äº</a>
    </nav>
  </header>
  
  <main>
    <slot /> <!-- å†…å®¹æ’æ§½ -->
  </main>
  
  <footer class="site-footer">
    <p>Â© 2024 æˆ‘çš„åšå®¢</p>
  </footer>
</body>
</html>
```

##### 3.2 æ–‡ç« è¯¦æƒ…æ¨¡æ¿

src/layouts/PostLayout.astro

```astro

---
import BaseLayout from './Layout.astro';
const { frontmatter } = Astro.props;
---
<BaseLayout title={frontmatter.title} description={frontmatter.excerpt}>
  <article class="post-content">
    <h1>{frontmatter.title}</h1>
    <time>{frontmatter.pubDate}</time>
    <slot />
  </article>
</BaseLayout>
```

### å››ã€å†…å®¹ç®¡ç†ç³»ç»Ÿé›†æˆ
##### 4.1 Markdown å†…å®¹å¤„ç†

src/content/posts/first-post.md

```markdown

---
title: "æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡"
pubDate: 2024-03-15
excerpt: "è¿™æ˜¯æ–‡ç« çš„æ‘˜è¦å†…å®¹"
---

# æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢

è¿™æ˜¯ä½¿ç”¨ Astro æ„å»ºçš„ç¬¬ä¸€ç¯‡æ–‡ç« ...
```

##### 4.2 åŠ¨æ€è·¯ç”±é…ç½®

src/pages/posts/[...slug].astro

```astro

---
import PostLayout from '../../layouts/PostLayout.astro';
export async function getStaticPaths() {
  const posts = await Astro.glob('../content/posts/*.md');
  return posts.map(post => ({
    params: { slug: post.url },
    props: { post },
  }));
}
const { post } = Astro.props;
---
<PostLayout frontmatter={post.frontmatter}>
  <article set:html={post.compiledContent()} />
</PostLayout>
```

### äº”ã€é«˜çº§åŠŸèƒ½æ‰©å±•
##### 5.1 æ ‡ç­¾åˆ†ç±»ç³»ç»Ÿ

```astro

---
const posts = await Astro.glob('./posts/*.md');
const tagMap = new Map();
posts.forEach(post => {
  post.frontmatter.tags?.forEach(tag => {
    tagMap.set(tag, [...(tagMap.get(tag) || []), post]);
  });
});
---
<section class="tag-cloud">
  {Array.from(tagMap).map(([tag, posts]) => (
    <a href={`/tags/${tag}`} class="tag">{tag} ({posts.length})</a>
  ))}
</section>
```

##### 5.2 æœç´¢åŠŸèƒ½å®ç°

```astro

---
// ç”Ÿæˆæœç´¢ç´¢å¼•
const searchData = posts.map(post => ({
  title: post.frontmatter.title,
  content: post.compiledContent(),
  url: `/posts/${post.frontmatter.slug}`
}));
---
<script>
// å®¢æˆ·ç«¯æœç´¢é€»è¾‘
const fuse = new Fuse(searchData, { keys: ['title', 'content'] });
function handleSearch(e) {
  const results = fuse.search(e.target.value);
  // æ›´æ–°ç»“æœåˆ—è¡¨...
}
</script>
```

### å…­ã€æ€§èƒ½ä¼˜åŒ–å®è·µ
##### 6.1 å›¾ç‰‡ä¼˜åŒ–ç­–ç•¥

```js
---
import { Image } from '@astrojs/image/components';
---
<Image 
src="/images/cover.jpg"
alt="æ–‡ç« å°é¢"
widths={[400, 800, 1200]}
sizes="(max-width: 768px) 100vw, 50vw"
formats={['avif', 'webp', 'jpeg']}
/>
```

##### 6.2 æ„å»ºä¼˜åŒ–é…ç½®

astro.config.mjs

```javascript

export default defineConfig({
  adapter: '@astrojs/netlify',
  output: 'static',
  compressHTML: true,
  integrations: [
    sitemap(),
    prefetch()
  ]
});
```

### ä¸ƒã€éƒ¨ç½²ä¸æŒç»­é›†æˆ
##### 7.1 GitHub Pages éƒ¨ç½²

.github/workflows/deploy.yml

```yaml

name: Deploy
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm install
      - run: npm run build
      - uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
```

##### 7.2 Vercel ä¸€é”®éƒ¨ç½²
bash

npm install -g vercel
vercel

### å…«ã€æœ€ä½³å®è·µå»ºè®®

    ç»„ä»¶æ‹†åˆ†ç­–ç•¥ï¼šä¿æŒç»„ä»¶å•ä¸€èŒè´£

    æ ·å¼ç®¡ç†æ–¹æ¡ˆï¼šæ¨èä½¿ç”¨ CSS Modules

    å†…å®¹æ›´æ–°æµç¨‹ï¼šç»“åˆ Git å·¥ä½œæµç®¡ç†

    SEO ä¼˜åŒ–ï¼šåˆç†ä½¿ç”¨ Schema ç»“æ„åŒ–æ•°æ®

    è®¿é—®ç»Ÿè®¡ï¼šé›†æˆ Plausible æˆ– Umami

### æ€»ç»“

é€šè¿‡æœ¬æ–‡çš„å®è·µæŒ‡å—ï¼Œæˆ‘ä»¬å®Œæ•´å®ç°äº†ï¼š

    åŸºäº Astro çš„æ¨¡æ¿ç³»ç»Ÿæ¶æ„è®¾è®¡

    Markdown å†…å®¹ç®¡ç†ç³»ç»Ÿé›†æˆ

    åŠ¨æ€è·¯ç”±ä¸åˆ†ç±»ç³»ç»Ÿå®ç°

    ç°ä»£åŒ–å‰ç«¯ä¼˜åŒ–å®è·µ

    è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹é…ç½®

